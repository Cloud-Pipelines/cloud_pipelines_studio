"use strict";(self.webpackChunktangle_website=self.webpackChunktangle_website||[]).push([[1867],{2914:(n,e,o)=>{o.r(e),o.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"component-development/oasis-cli-manual","title":"Oasis CLI Manual","description":"Complete reference guide for the Oasis CLI tool for component and container management","source":"@site/docs/component-development/oasis-cli-manual.mdx","sourceDirName":"component-development","slug":"/component-development/oasis-cli-manual","permalink":"/docs/component-development/oasis-cli-manual","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Oasis CLI Manual","description":"Complete reference guide for the Oasis CLI tool for component and container management"},"sidebar":"docs","previous":{"title":"Published Components Library","permalink":"/docs/component-development/published-components-library"},"next":{"title":"Component Schema Reference","permalink":"/docs/reference/schema"}}');var s=o(4848),t=o(8453);const r={title:"Oasis CLI Manual",description:"Complete reference guide for the Oasis CLI tool for component and container management"},c="Oasis CLI Manual",a={},l=[{value:"Installation",id:"installation",level:2},{value:"Command Structure",id:"command-structure",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"1. Create a Component Root",id:"1-create-a-component-root",level:3},{value:"2. Build Container Image",id:"2-build-container-image",level:3},{value:"3. Create a Component",id:"3-create-a-component",level:3},{value:"Container Commands",id:"container-commands",level:2},{value:"<code>oasis containers new</code>",id:"oasis-containers-new",level:3},{value:"<code>oasis containers build</code>",id:"oasis-containers-build",level:3},{value:"Component Commands",id:"component-commands",level:2},{value:"<code>oasis components new</code>",id:"oasis-components-new",level:3},{value:"<code>oasis components regenerate</code>",id:"oasis-components-regenerate",level:3},{value:"Workflow Patterns",id:"workflow-patterns",level:2},{value:"Pattern 1: Single Component Root, Multiple Components",id:"pattern-1-single-component-root-multiple-components",level:3},{value:"Pattern 2: Updating Dependencies",id:"pattern-2-updating-dependencies",level:3},{value:"File Structure",id:"file-structure",level:2},{value:"Configuration Files",id:"configuration-files",level:2},{value:"oasis.pipeline_component_root.yaml",id:"oasispipeline_component_rootyaml",level:3},{value:"component.yaml",id:"componentyaml",level:3},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Common Issues",id:"common-issues",level:3},{value:"Best Practices",id:"best-practices",level:2}];function d(n){const e={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"oasis-cli-manual",children:"Oasis CLI Manual"})}),"\n",(0,s.jsx)(e.p,{children:"The Oasis CLI is a command-line tool for creating and managing pipeline components and their container environments. It streamlines the development workflow for building reusable ML pipeline components."}),"\n",(0,s.jsx)(e.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'# Install via uvx (recommended)\nalias oasis="uvx --refresh --from git+https://github.com/Cloud-Pipelines/oasis-cli.git@stable oasis"\n\n# Or install directly\npip install git+https://github.com/Cloud-Pipelines/oasis-cli.git@stable\n'})}),"\n",(0,s.jsx)(e.admonition,{type:"tip",children:(0,s.jsxs)(e.p,{children:["Using ",(0,s.jsx)(e.code,{children:"uvx"})," with the ",(0,s.jsx)(e.code,{children:"--refresh"})," flag ensures you always run the latest stable version without managing local installations."]})}),"\n",(0,s.jsx)(e.h2,{id:"command-structure",children:"Command Structure"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"oasis [OPTIONS] COMMAND [ARGS]\n"})}),"\n",(0,s.jsx)(e.p,{children:"The CLI follows a hierarchical command structure with two main command groups:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"containers"})," - Manage container images and dependencies"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.code,{children:"components"})," - Manage pipeline components"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,s.jsx)(e.h3,{id:"1-create-a-component-root",children:"1. Create a Component Root"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'# Create and initialize a component root directory\ncomponents_root="$(pwd)/components_root1"\nmkdir -p "$components_root" && cd "$components_root"\n\n# Initialize container root from template\noasis containers new python-uv-container-root \\\n    --container-image-name <writeable-container-image-uri>\n'})}),"\n",(0,s.jsx)(e.h3,{id:"2-build-container-image",children:"2. Build Container Image"}),"\n",(0,s.jsx)(e.admonition,{type:"info",children:(0,s.jsxs)(e.p,{children:["By default, Oasis CLI will use Podman. Ensure you have Podman installed and configured correctly.\nYou may need to start your Podman ",(0,s.jsx)(e.code,{children:"podman machine start"})," before building the container."]})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Add dependencies (optional)\nuv add numpy pandas scikit-learn\n\n# Build and push container\noasis containers build\n"})}),"\n",(0,s.jsx)(e.h3,{id:"3-create-a-component",children:"3. Create a Component"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'# Create component directory\nmkdir -p my_component && cd my_component\n\n# Initialize component from template\noasis components new python-function-component\n\n# Generate component.yaml\noasis components regenerate python-function-component \\\n    --container-image-from "${components_root}/oasis.pipeline_component_root.yaml" \\\n    --dependencies-from "${components_root}/pyproject.toml"\n'})}),"\n",(0,s.jsx)(e.h2,{id:"container-commands",children:"Container Commands"}),"\n",(0,s.jsx)(e.h3,{id:"oasis-containers-new",children:(0,s.jsx)(e.code,{children:"oasis containers new"})}),"\n",(0,s.jsx)(e.p,{children:"Creates a new container root with necessary configuration files."}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Synopsis:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"oasis containers new TEMPLATE [OPTIONS]\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Templates:"})}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Template"}),(0,s.jsx)(e.th,{children:"Description"}),(0,s.jsx)(e.th,{children:"Generated Files"})]})}),(0,s.jsx)(e.tbody,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"python-uv-container-root"})}),(0,s.jsx)(e.td,{children:"Python container with uv package manager"}),(0,s.jsxs)(e.td,{children:[(0,s.jsx)(e.code,{children:"Dockerfile"}),", ",(0,s.jsx)(e.code,{children:"pyproject.toml"}),", ",(0,s.jsx)(e.code,{children:"uv.lock"}),", ",(0,s.jsx)(e.code,{children:"oasis.pipeline_component_root.yaml"})]})]})})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Options:"})}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Option"}),(0,s.jsx)(e.th,{children:"Description"}),(0,s.jsx)(e.th,{children:"Required"})]})}),(0,s.jsx)(e.tbody,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"--container-image-name"})}),(0,s.jsx)(e.td,{children:"Container registry URI where image will be pushed"}),(0,s.jsx)(e.td,{children:"Yes"})]})})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Example:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"oasis containers new python-uv-container-root \\\n    --container-image-name gcr.io/my-project/my-components-base:latest\n"})}),"\n",(0,s.jsx)(e.admonition,{type:"warning",children:(0,s.jsx)(e.p,{children:"Ensure you have write permissions to the specified container registry before running the build command."})}),"\n",(0,s.jsx)(e.h3,{id:"oasis-containers-build",children:(0,s.jsx)(e.code,{children:"oasis containers build"})}),"\n",(0,s.jsx)(e.p,{children:"Builds a Docker container image and pushes it to the specified registry."}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Synopsis:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"oasis containers build [OPTIONS]\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Behavior:"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Reads configuration from ",(0,s.jsx)(e.code,{children:"oasis.pipeline_component_root.yaml"})]}),"\n",(0,s.jsxs)(e.li,{children:["Builds Docker image using the ",(0,s.jsx)(e.code,{children:"Dockerfile"})," in current directory"]}),"\n",(0,s.jsxs)(e.li,{children:["Pushes to the registry specified during ",(0,s.jsx)(e.code,{children:"new"})," command"]}),"\n",(0,s.jsx)(e.li,{children:"Updates the image digest in configuration"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Example:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# From within the container root directory\noasis containers build\n"})}),"\n",(0,s.jsx)(e.h2,{id:"component-commands",children:"Component Commands"}),"\n",(0,s.jsx)(e.h3,{id:"oasis-components-new",children:(0,s.jsx)(e.code,{children:"oasis components new"})}),"\n",(0,s.jsx)(e.p,{children:"Creates a new component from a template."}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Synopsis:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"oasis components new TEMPLATE [OPTIONS]\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Templates:"})}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Template"}),(0,s.jsx)(e.th,{children:"Description"}),(0,s.jsx)(e.th,{children:"Generated Files"})]})}),(0,s.jsx)(e.tbody,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"python-function-component"})}),(0,s.jsx)(e.td,{children:"Basic Python function component"}),(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"component.py"})})]})})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Example:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"mkdir my_component && cd my_component\noasis components new python-function-component\n"})}),"\n",(0,s.jsx)(e.h3,{id:"oasis-components-regenerate",children:(0,s.jsx)(e.code,{children:"oasis components regenerate"})}),"\n",(0,s.jsxs)(e.p,{children:["Regenerates the ",(0,s.jsx)(e.code,{children:"component.yaml"})," specification from the component source code."]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Synopsis:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"oasis components regenerate TEMPLATE [OPTIONS]\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Options:"})}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Option"}),(0,s.jsx)(e.th,{children:"Description"}),(0,s.jsx)(e.th,{children:"Required"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"--container-image-from"})}),(0,s.jsx)(e.td,{children:"Path to container root YAML file"}),(0,s.jsx)(e.td,{children:"Yes"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.code,{children:"--dependencies-from"})}),(0,s.jsx)(e.td,{children:"Path to pyproject.toml with dependencies"}),(0,s.jsx)(e.td,{children:"Yes"})]})]})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Example:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'oasis components regenerate python-function-component \\\n    --container-image-from "../components_root/oasis.pipeline_component_root.yaml" \\\n    --dependencies-from "../components_root/pyproject.toml"\n'})}),"\n",(0,s.jsx)(e.admonition,{type:"tip",children:(0,s.jsxs)(e.p,{children:["The ",(0,s.jsx)(e.code,{children:"regenerate"})," command parses your ",(0,s.jsx)(e.code,{children:"component.py"})," file to automatically generate the ComponentSpec YAML, including inputs, outputs, and metadata."]})}),"\n",(0,s.jsx)(e.h2,{id:"workflow-patterns",children:"Workflow Patterns"}),"\n",(0,s.jsx)(e.h3,{id:"pattern-1-single-component-root-multiple-components",children:"Pattern 1: Single Component Root, Multiple Components"}),"\n",(0,s.jsx)(e.p,{children:"Best for components that share dependencies."}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'# 1. Create shared container root\ncomponents_root="$(pwd)/shared_components"\nmkdir -p "$components_root" && cd "$components_root"\noasis containers new python-uv-container-root \\\n    --container-image-name my-registry/shared-base:latest\n\n# 2. Add common dependencies\nuv add numpy pandas scikit-learn\noasis containers build\n\n# 3. Create multiple components using the same base\nfor comp in preprocessor trainer evaluator; do\n    mkdir -p "../$comp" && cd "../$comp"\n    oasis components new python-function-component\n    oasis components regenerate python-function-component \\\n        --container-image-from "${components_root}/oasis.pipeline_component_root.yaml" \\\n        --dependencies-from "${components_root}/pyproject.toml"\ndone\n'})}),"\n",(0,s.jsx)(e.h3,{id:"pattern-2-updating-dependencies",children:"Pattern 2: Updating Dependencies"}),"\n",(0,s.jsx)(e.p,{children:"When you need to add new dependencies to existing components:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'# 1. Navigate to container root\ncd components_root\n\n# 2. Add new dependencies\nuv add tensorflow transformers\n\n# 3. Rebuild container\noasis containers build\n\n# 4. Regenerate affected components\ncd ../my_component\noasis components regenerate python-function-component \\\n    --container-image-from "../components_root/oasis.pipeline_component_root.yaml" \\\n    --dependencies-from "../components_root/pyproject.toml"\n'})}),"\n",(0,s.jsx)(e.h2,{id:"file-structure",children:"File Structure"}),"\n",(0,s.jsx)(e.p,{children:"A typical project structure using oasis-cli:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"project/\n\u251c\u2500\u2500 Dockerfile\n\u251c\u2500\u2500 pyproject.toml\n\u251c\u2500\u2500 uv.lock\n\u251c\u2500\u2500 oasis.pipeline_component_root.yaml\n\u2514\u2500\u2500 components/\n    \u251c\u2500\u2500 data_processor/\n    \u2502   \u251c\u2500\u2500 component.py\n    \u2502   \u2514\u2500\u2500 component.yaml\n    \u251c\u2500\u2500 model_trainer/\n    \u2502   \u251c\u2500\u2500 component.py\n    \u2502   \u2514\u2500\u2500 component.yaml\n    \u2514\u2500\u2500 evaluator/\n        \u251c\u2500\u2500 component.py\n        \u2514\u2500\u2500 component.yaml\n"})}),"\n",(0,s.jsx)(e.h2,{id:"configuration-files",children:"Configuration Files"}),"\n",(0,s.jsx)(e.h3,{id:"oasispipeline_component_rootyaml",children:"oasis.pipeline_component_root.yaml"}),"\n",(0,s.jsx)(e.p,{children:"Stores container configuration."}),"\n",(0,s.jsx)(e.h3,{id:"componentyaml",children:"component.yaml"}),"\n",(0,s.jsx)(e.p,{children:"Generated ComponentSpec for pipeline components:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-yaml",children:'name: My Component\ndescription: Component description\ninputs:\n  - name: input_data\n    type: Dataset\noutputs:\n  - name: output_model\n    type: Model\nimplementation:\n  container:\n    image: gcr.io/project/components@sha256:...\n    command: ["python", "component.py"]\n'})}),"\n",(0,s.jsx)(e.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-shell",children:"CLOUD_PIPELINES_CONTAINER_EXECUTION_ID\nCLOUD_PIPELINES_EXECUTION_NODE_ID\nCLOUD_PIPELINES_PIPELINE_RUN_ID\nCLOUD_PIPELINES_PIPELINE_RUN_CREATED_BY\n"})}),"\n",(0,s.jsx)(e.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(e.h3,{id:"common-issues",children:"Common Issues"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Container push fails:"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"TODO"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Component regeneration fails:"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Verify ",(0,s.jsx)(e.code,{children:"component.py"})," follows the expected component structure"]}),"\n",(0,s.jsx)(e.li,{children:"Check that container root YAML exists and is valid"}),"\n",(0,s.jsx)(e.li,{children:"Ensure all file paths are correct"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Dependency conflicts:"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["Use ",(0,s.jsx)(e.code,{children:"uv"})," to manage Python dependencies consistently"]}),"\n",(0,s.jsxs)(e.li,{children:["Clear ",(0,s.jsx)(e.code,{children:"uv.lock"})," and regenerate if conflicts persist"]}),"\n",(0,s.jsx)(e.li,{children:"Ensure Python version compatibility"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Version Control:"})," Commit both source files (",(0,s.jsx)(e.code,{children:"component.py"}),") and generated files (",(0,s.jsx)(e.code,{children:"component.yaml"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Container Tagging:"})," Use semantic versioning for container images"]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"--container-image-name my-registry/components:v1.0.0\n"})}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Dependency Management:"})," Keep dependencies minimal and specify exact versions in ",(0,s.jsx)(e.code,{children:"pyproject.toml"})]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Component Organization:"})," Group related components under the same container root to share dependencies"]}),"\n"]}),"\n",(0,s.jsxs)(e.li,{children:["\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Testing:"})," Test components individually before integrating into pipelines"]}),"\n"]}),"\n"]})]})}function p(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}}}]);